{"remainingRequest":"/Users/panfangziniubi/Desktop/project/sale/node_modules/.store/babel-loader@8.3.0/node_modules/babel-loader/lib/index.js!/Users/panfangziniubi/Desktop/project/sale/node_modules/.store/cache-loader@4.1.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/panfangziniubi/Desktop/project/sale/node_modules/.store/vue-loader@15.11.1/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/panfangziniubi/Desktop/project/sale/src/views/KnowledgeDetail.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/panfangziniubi/Desktop/project/sale/src/views/KnowledgeDetail.vue","mtime":1650961779000},{"path":"/Users/panfangziniubi/Desktop/project/sale/babel.config.js","mtime":1628668279000},{"path":"/Users/panfangziniubi/Desktop/project/sale/node_modules/.store/cache-loader@4.1.0/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/panfangziniubi/Desktop/project/sale/node_modules/.store/babel-loader@8.3.0/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/panfangziniubi/Desktop/project/sale/node_modules/.store/cache-loader@4.1.0/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/panfangziniubi/Desktop/project/sale/node_modules/.store/vue-loader@15.11.1/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgc2VsZWN0S25vd2xlZGdlQnlJZCwgc2VsZWN0Q29tbWVudCwgYWRkQ29tbWVudCB9IGZyb20gIi4uL2FwaS9rbm93bGVkZ2UiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVwZGF0ZUluZm86IHt9LAogICAgICBjb250ZW50OiAnJywKICAgICAgY29tbWVudEFycmF5OiBbXQogICAgfTsKICB9LAogIGZpbHRlcnM6IHsKICAgIGZvcm1hdFRpbWVyOiBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgbGV0IGRhdGUgPSBuZXcgRGF0ZSh2YWx1ZSk7CiAgICAgIGxldCB5ID0gZGF0ZS5nZXRGdWxsWWVhcigpOwogICAgICBsZXQgTU0gPSBkYXRlLmdldE1vbnRoKCkgKyAxOwogICAgICBNTSA9IE1NIDwgMTAgPyAiMCIgKyBNTSA6IE1NOwogICAgICBsZXQgZCA9IGRhdGUuZ2V0RGF0ZSgpOwogICAgICBkID0gZCA8IDEwID8gIjAiICsgZCA6IGQ7CiAgICAgIGxldCBoID0gZGF0ZS5nZXRIb3VycygpOwogICAgICBoID0gaCA8IDEwID8gIjAiICsgaCA6IGg7CiAgICAgIGxldCBtID0gZGF0ZS5nZXRNaW51dGVzKCk7CiAgICAgIG0gPSBtIDwgMTAgPyAiMCIgKyBtIDogbTsKICAgICAgbGV0IHMgPSBkYXRlLmdldFNlY29uZHMoKTsKICAgICAgcyA9IHMgPCAxMCA/ICIwIiArIHMgOiBzOwogICAgICByZXR1cm4geSArICItIiArIE1NICsgIi0iICsgZCArICIgIjsKICAgIH0sCiAgICBmb3JtYXRUaW1lcjI6IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKHZhbHVlKTsKICAgICAgbGV0IHkgPSBkYXRlLmdldEZ1bGxZZWFyKCk7CiAgICAgIGxldCBNTSA9IGRhdGUuZ2V0TW9udGgoKSArIDE7CiAgICAgIE1NID0gTU0gPCAxMCA/ICIwIiArIE1NIDogTU07CiAgICAgIGxldCBkID0gZGF0ZS5nZXREYXRlKCk7CiAgICAgIGQgPSBkIDwgMTAgPyAiMCIgKyBkIDogZDsKICAgICAgbGV0IGggPSBkYXRlLmdldEhvdXJzKCk7CiAgICAgIGggPSBoIDwgMTAgPyAiMCIgKyBoIDogaDsKICAgICAgbGV0IG0gPSBkYXRlLmdldE1pbnV0ZXMoKTsKICAgICAgbSA9IG0gPCAxMCA/ICIwIiArIG0gOiBtOwogICAgICBsZXQgcyA9IGRhdGUuZ2V0U2Vjb25kcygpOwogICAgICBzID0gcyA8IDEwID8gIjAiICsgcyA6IHM7CiAgICAgIHJldHVybiB5ICsgIi0iICsgTU0gKyAiLSIgKyBkICsgIiAiICsgaCArICI6IiArIG07CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXREYXRhKCkgewogICAgICB0aGlzLiRzdG9yZS5jb21taXQoInVwZGF0ZUFjdGl2ZUluZGV4IiwgIjQiKTsKICAgICAgc2VsZWN0S25vd2xlZGdlQnlJZCh7CiAgICAgICAga25vd2xlZGdlSWQ6IHRoaXMuJHJvdXRlLnBhcmFtcy5pZAogICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgbGV0IHRtcCA9IHJlcy5kYXRhOwogICAgICAgIGNvbnN0IGZsaWVBcnIgPSB0bXAucGljUGF0aC5zcGxpdCgnLicpOwogICAgICAgIHRtcC50eXBlID0gZmxpZUFycltmbGllQXJyLmxlbmd0aCAtIDFdOwogICAgICAgIHRoaXMudXBkYXRlSW5mbyA9IHRtcDsKICAgICAgICBjb25zb2xlLmxvZygndGhpcy51cGRhdGVJbmZvJywgdGhpcy51cGRhdGVJbmZvKTsKICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICB9KTsKICAgIH0sCiAgICAvLyDmn6Xor6Lor4TorroKICAgIGdldENvbW1lbnREYXRhKCkgewogICAgICBzZWxlY3RDb21tZW50KHsKICAgICAgICBrbm93bGVkZ2VJZDogdGhpcy4kcm91dGUucGFyYW1zLmlkCiAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLmNvbW1lbnRBcnJheSA9IHJlcy5kYXRhOwogICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0pOwogICAgfSwKICAgIGhhbmRsZUNvbW1lbnQoKSB7CiAgICAgIGlmICh0aGlzLmNvbnRlbnQgPT09ICcnKSB7CiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign6K+E6K665YaF5a655LiN6IO95Li656m677yBJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmIChsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKSkgewogICAgICAgIGFkZENvbW1lbnQoewogICAgICAgICAga25vd2xlZGdlSWQ6IHRoaXMuJHJvdXRlLnBhcmFtcy5pZCwKICAgICAgICAgIGNvbnRlbnQ6IHRoaXMuY29udGVudAogICAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICAgIHRoaXMuY29udGVudCA9ICcnOwogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCfor4TorrrmiJDlip/vvIEnKTsKICAgICAgICAgIHRoaXMuZ2V0Q29tbWVudERhdGEoKTsKICAgICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfor7flhYjnmbvlvZUnKTsKICAgICAgfQogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0RGF0YSgpOwogICAgdGhpcy5nZXRDb21tZW50RGF0YSgpOwogIH0KfTs="},{"version":3,"names":["selectKnowledgeById","selectComment","addComment","data","updateInfo","content","commentArray","filters","formatTimer","value","date","Date","y","getFullYear","MM","getMonth","d","getDate","h","getHours","m","getMinutes","s","getSeconds","formatTimer2","methods","getData","$store","commit","knowledgeId","$route","params","id","then","res","tmp","flieArr","picPath","split","type","length","console","log","catch","err","getCommentData","handleComment","$message","error","localStorage","getItem","success","mounted"],"sources":["src/views/KnowledgeDetail.vue"],"sourcesContent":["<!-- 农业知识详情 -->\n<template>\n  <div class=\"knowlege-detail-container\">\n    <div class=\"title\">{{updateInfo.title}}</div>\n    <div class=\"tips\">\n      <span>作者：</span>\n      <span style=\"margin-right:20px;\">{{updateInfo.ownName}}</span>\n      <span>日期：</span>\n      <span>{{updateInfo.updateTime | formatTimer}}</span>\n    </div>\n    <div class=\"detail-img\">\n      <video v-if=\"updateInfo.type==='mp4'||updateInfo.type==='MP4'\" id=\"video\" width=\"900\" height=\"360\" :src=\"$store.state.imgShowRoad + '/file/' + updateInfo.picPath\" controls> </video>\n      <img v-else style=\"width:500px;height:300px;\" :src=\"$store.state.imgShowRoad + '/file/' + updateInfo.picPath\" alt=\"\" />\n    </div>\n    <div class=\"detail-content\">\n      <pre>{{updateInfo.content}}</pre>\n    </div>\n    <el-input type=\"textarea\" v-model=\"content\" :rows=\"5\"></el-input>\n    <div style=\"margin-top:20px;display: flex;flex-direction: row;justify-content: flex-end\">\n      <el-button type=\"success\" @click=\"handleComment\">添加评论</el-button>\n    </div>\n    <div class=\"comment-container\">\n      <div class=\"comment-num\">评论共{{commentArray.length||0}}条</div>\n      <div class=\"comment-item\" v-for=\"(item,index) in commentArray\" :key=\"index\">\n        <div>{{item.content}}</div>\n        <div class=\"comment-tips\">\n          <div style=\"margin-right:40px;\">评论人：<span class=\"color6\">{{item.ownName}}</span></div>\n          <div>评论时间：<span class=\"color6\">{{item.createTime|formatTimer2}}</span></div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { selectKnowledgeById,selectComment,addComment } from \"../api/knowledge\";\n\nexport default {\n  data(){\n    return{\n      updateInfo:{},\n      content:'',\n      commentArray:[]\n    }\n  },\n  filters: {\n    formatTimer: function(value) {\n      let date = new Date(value);\n      let y = date.getFullYear();\n      let MM = date.getMonth() + 1;\n      MM = MM < 10 ? \"0\" + MM : MM;\n      let d = date.getDate();\n      d = d < 10 ? \"0\" + d : d;\n      let h = date.getHours();\n      h = h < 10 ? \"0\" + h : h;\n      let m = date.getMinutes();\n      m = m < 10 ? \"0\" + m : m;\n      let s = date.getSeconds();\n      s = s < 10 ? \"0\" + s : s;\n      return y + \"-\" + MM + \"-\" + d + \" \";\n    },\n    formatTimer2: function(value) {\n      let date = new Date(value);\n      let y = date.getFullYear();\n      let MM = date.getMonth() + 1;\n      MM = MM < 10 ? \"0\" + MM : MM;\n      let d = date.getDate();\n      d = d < 10 ? \"0\" + d : d;\n      let h = date.getHours();\n      h = h < 10 ? \"0\" + h : h;\n      let m = date.getMinutes();\n      m = m < 10 ? \"0\" + m : m;\n      let s = date.getSeconds();\n      s = s < 10 ? \"0\" + s : s;\n      return y + \"-\" + MM + \"-\" + d + \" \"+h+\":\"+m;\n    }\n  },\n  methods:{\n    getData(){\n      this.$store.commit(\"updateActiveIndex\", \"4\");\n      selectKnowledgeById({\n        knowledgeId: this.$route.params.id\n      }).then((res) => {\n        let tmp = res.data;\n        const flieArr =  tmp.picPath.split('.')\n        tmp.type = flieArr[flieArr.length - 1]\n        this.updateInfo = tmp;\n        console.log('this.updateInfo',this.updateInfo)\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n    },\n    // 查询评论\n    getCommentData(){\n      selectComment({\n        knowledgeId: this.$route.params.id\n      }).then(res => {\n        this.commentArray = res.data\n      }).catch(err=>{\n        console.log(err)\n      })\n    },\n    handleComment(){\n      if(this.content===''){\n        this.$message.error('评论内容不能为空！')\n        return\n      }\n      if(localStorage.getItem('token')){\n        addComment({\n          knowledgeId: this.$route.params.id,\n          content: this.content\n        }).then(res=>{\n          this.content=''\n          this.$message.success('评论成功！')\n          this.getCommentData()\n        }).catch(err=>{\n          console.log(err)\n        })\n      }else{\n        this.$message.error('请先登录')\n      }\n    }\n  },\n  mounted(){\n    this.getData()\n    this.getCommentData()\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.knowlege-detail-container{\n  width: 1100px;\n  margin: 0 auto;\n  background: #fff;\n  min-height: 100%;\n  padding: 10px 20px;\n  margin-top: 10px;\n  .title{\n    font-size: 18px;\n    text-align: center;\n  }\n  .tips{\n    color: #999;\n    display: flex;\n    justify-content: flex-end;\n    height: 30px;\n    align-items: center;\n  }\n  .detail-img{\n    display: flex;\n    justify-content: center;\n    margin-top: 50px;\n    video{\n      border: 1px solid #f2f2f2;\n    }\n    img{\n      border-radius: 6px;\n    }\n  }\n  .detail-content{\n\n  }\n  .comment-container{\n    clear: both;\n    margin-top: 10px;\n    .comment-num{\n      font-weight: bold;\n    }\n    .comment-item{\n      border-bottom: 1px solid #f2f2f2;\n      padding: 10px 20px;\n      margin: 20px 0;\n      word-break: break-all;\n      .comment-tips{\n        display: flex;\n        flex-direction: row;\n        justify-content: flex-end;\n        .color6{\n          color: #666;\n        }\n      }\n    }\n  }\n}\n</style>"],"mappings":"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","ignoreList":[]}]}