{"remainingRequest":"/Users/panfangziniubi/Desktop/project/sale/node_modules/.store/babel-loader@8.3.0/node_modules/babel-loader/lib/index.js!/Users/panfangziniubi/Desktop/project/sale/node_modules/.store/cache-loader@4.1.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/panfangziniubi/Desktop/project/sale/node_modules/.store/vue-loader@15.11.1/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/panfangziniubi/Desktop/project/sale/src/views/purchaseDetails.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/panfangziniubi/Desktop/project/sale/src/views/purchaseDetails.vue","mtime":1662607712000},{"path":"/Users/panfangziniubi/Desktop/project/sale/babel.config.js","mtime":1628668279000},{"path":"/Users/panfangziniubi/Desktop/project/sale/node_modules/.store/cache-loader@4.1.0/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/panfangziniubi/Desktop/project/sale/node_modules/.store/babel-loader@8.3.0/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/panfangziniubi/Desktop/project/sale/node_modules/.store/cache-loader@4.1.0/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/panfangziniubi/Desktop/project/sale/node_modules/.store/vue-loader@15.11.1/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgYWRkT3JkZXJUb0NhcnQgfSBmcm9tICIuLi9hcGkvY2FydCI7CmltcG9ydCB7IHNlbGVjdE9yZGVyQnlJZCB9IGZyb20gIi4uL2FwaS9vcmRlciI7CmltcG9ydCBDaGFuZ2VNZXNzYWdlIGZyb20gIi4uL2NvbXBvbmVudHMvQ2hhbmdlTWVzc2FnZS52dWUiOwppbXBvcnQgeyBzZWxlY3RVc2VyQnlVc2VybmFtZSB9IGZyb20gIi4uL2FwaS91c2VyIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkYXRhOiBbXSwKICAgICAgb3duZXJJbmZvOiB7fSwKICAgICAgdXNlckdvb2RzOiBbXSwKICAgICAgdXBkYXRlR29vZEluZm86IHt9LAogICAgICB1cGRhdGVVc2VyRGF0YToge30KICAgIH07CiAgfSwKICBmaWx0ZXJzOiB7CiAgICBjaGFuZ2VUaW1lKHRpbWUpIHsKICAgICAgcmV0dXJuIHRpbWUuc2xpY2UoMCwgMTApOwogICAgfSwKICAgIGZvcm1hdFRpbWVyOiBmdW5jdGlvbiAodmFsdWUpIHsKICAgICAgbGV0IGRhdGUgPSBuZXcgRGF0ZSh2YWx1ZSk7CiAgICAgIGxldCB5ID0gZGF0ZS5nZXRGdWxsWWVhcigpOwogICAgICBsZXQgTU0gPSBkYXRlLmdldE1vbnRoKCkgKyAxOwogICAgICBNTSA9IE1NIDwgMTAgPyAiMCIgKyBNTSA6IE1NOwogICAgICBsZXQgZCA9IGRhdGUuZ2V0RGF0ZSgpOwogICAgICBkID0gZCA8IDEwID8gIjAiICsgZCA6IGQ7CiAgICAgIGxldCBoID0gZGF0ZS5nZXRIb3VycygpOwogICAgICBoID0gaCA8IDEwID8gIjAiICsgaCA6IGg7CiAgICAgIGxldCBtID0gZGF0ZS5nZXRNaW51dGVzKCk7CiAgICAgIG0gPSBtIDwgMTAgPyAiMCIgKyBtIDogbTsKICAgICAgbGV0IHMgPSBkYXRlLmdldFNlY29uZHMoKTsKICAgICAgcyA9IHMgPCAxMCA/ICIwIiArIHMgOiBzOwogICAgICByZXR1cm4geSArICItIiArIE1NICsgIi0iICsgZCArICIgIjsKICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIENoYW5nZU1lc3NhZ2UKICB9LAogIHByb3BzOiB7CiAgICBjdHlwZTogewogICAgICB0eXBlOiBTdHJpbmcKICAgIH0sCiAgICBjZGVzY2lpYmU6IHsKICAgICAgdHlwZTogU3RyaW5nCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBhZGRTaG9wY2FydENsaWNrKCkgewogICAgICBhZGRPcmRlclRvQ2FydCh7CiAgICAgICAgb3JkZXJfaWQ6IHRoaXMuZGF0YS5vcmRlcklkCiAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgIGlmIChyZXMuZmxhZyA9PSB0cnVlKSB7CiAgICAgICAgICBhbGVydChyZXMubWVzc2FnZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGFsZXJ0KHJlcy5tZXNzYWdlKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgYWxlcnQoIua3u+WKoOWksei0pSzor7flhYjnmbvlvZUiKTsKICAgICAgfSk7CiAgICB9LAogICAgY2hhbmdlSW5mbygpIHsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ1cGRhdGVDaGFuZ2VkT3JkZXJJZCIsIHRoaXMuJHN0b3JlLnN0YXRlLmNoYW5nZWRPcmRlcklkKTsKICAgICAgc2VsZWN0T3JkZXJCeUlkKHsKICAgICAgICBvcmRlcl9pZDogdGhpcy4kc3RvcmUuc3RhdGUuY2hhbmdlZE9yZGVySWQKICAgICAgfSkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMudXBkYXRlR29vZEluZm8gPSByZXMuZGF0YTsKICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICB9KTsKICAgIH0sCiAgICBnZXRTYWxlc0luZm8oKSB7CiAgICAgIHNlbGVjdFVzZXJCeVVzZXJuYW1lKHsKICAgICAgICB1c2VyX25hbWU6IHRoaXMuZGF0YS5vd25OYW1lCiAgICAgIH0pLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLnVwZGF0ZVVzZXJEYXRhID0gcmVzLmRhdGE7CiAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgY29uc29sZS5sb2coZXJyKTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgdGhpcy4kc3RvcmUuY29tbWl0KCJ1cGRhdGVBY3RpdmVJbmRleCIsICIzIik7CiAgICBzZWxlY3RPcmRlckJ5SWQoewogICAgICBvcmRlcl9pZDogdGhpcy4kcm91dGUucXVlcnkub3JkZXJJZAogICAgfSkudGhlbihyZXMgPT4gewogICAgICBpZiAocmVzLmZsYWcgPT0gdHJ1ZSkgewogICAgICAgIHRoaXMuZGF0YSA9IHJlcy5kYXRhOwogICAgICAgIHRoaXMuZ2V0U2FsZXNJbmZvKCk7CiAgICAgIH0KICAgIH0pOwogIH0KfTs="},{"version":3,"names":["addOrderToCart","selectOrderById","ChangeMessage","selectUserByUsername","data","ownerInfo","userGoods","updateGoodInfo","updateUserData","filters","changeTime","time","slice","formatTimer","value","date","Date","y","getFullYear","MM","getMonth","d","getDate","h","getHours","m","getMinutes","s","getSeconds","components","props","ctype","type","String","cdesciibe","methods","addShopcartClick","order_id","orderId","then","res","console","log","flag","alert","message","catch","err","changeInfo","$store","commit","state","changedOrderId","getSalesInfo","user_name","ownName","mounted","$route","query"],"sources":["src/views/purchaseDetails.vue"],"sourcesContent":["<template>\n  <div class=\"details-box\">\n    <h4 class=\"title\">{{ data.title }}</h4>\n    <div class=\"time\">\n      <span>发布时间：{{ data.createTime | changeTime }}</span>\n      <span style=\"margin-left: 50px;\">最近修改时间：{{ data.updateTime | changeTime }}</span>\n      <div class=\"item-style\">\n        <el-button type=\"danger\" @click=\"addShopcartClick\" v-if=\"data.type == 'goods'\">加入购物车</el-button>\n        <el-popover placement=\"right\" width=\"320\" trigger=\"hover\">\n          <div>\n            <div class=\"item-sales\">买家姓名：<span class=\"sales-text\">{{data.ownName}}</span></div>\n            <div class=\"item-sales\">买家地址：<span class=\"sales-text\">{{data.address}}</span></div>\n            <div class=\"item-sales\">更新时间：<span class=\"sales-text\">{{data.updateTime | formatTimer}}</span></div>\n          </div>\n          <div style=\"color:#fc7373;margin-left:50px;cursor:pointer;display: flex;\" slot=\"reference\" @click=\"changeInfo\" v-show=\"data.type == 'needs'\">\n            <div style=\"margin-right:10px;color:#fff;font-weight:bold;background: #fc7373;width: 20px;height: 20px;border-radius: 10px;line-height: 20px;text-align: center;\">!</div>\n            买家信息\n          </div>\n        </el-popover>\n      </div>\n    </div>\n    <img :src=\"$store.state.imgShowRoad + '/file/' + data.picture\" v-show=\"data.picture\" alt=\"\" />\n    <div class=\"info\">\n      <div class=\"content\" :title=\"data.content\">{{ data.content }}</div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { addOrderToCart } from \"../api/cart\";\nimport { selectOrderById } from \"../api/order\";\nimport ChangeMessage from \"../components/ChangeMessage.vue\";\nimport { selectUserByUsername } from \"../api/user\";\n\nexport default {\n  data() {\n    return {\n      data: [],\n      ownerInfo: {},\n      userGoods: [],\n      updateGoodInfo: {},\n      updateUserData:{}\n    };\n  },\n  filters: {\n    changeTime(time) {\n      return time.slice(0, 10);\n    },\n    formatTimer: function(value) {\n      let date = new Date(value);\n      let y = date.getFullYear();\n      let MM = date.getMonth() + 1;\n      MM = MM < 10 ? \"0\" + MM : MM;\n      let d = date.getDate();\n      d = d < 10 ? \"0\" + d : d;\n      let h = date.getHours();\n      h = h < 10 ? \"0\" + h : h;\n      let m = date.getMinutes();\n      m = m < 10 ? \"0\" + m : m;\n      let s = date.getSeconds();\n      s = s < 10 ? \"0\" + s : s;\n      return y + \"-\" + MM + \"-\" + d + \" \";\n    }\n  },\n  components: { ChangeMessage },\n  props: {\n    ctype: {\n      type: String,\n    },\n    cdesciibe: {\n      type: String,\n    },\n  },\n  methods: {\n    addShopcartClick() {\n      addOrderToCart({\n        order_id: this.data.orderId,\n      })\n        .then((res) => {\n          console.log(res);\n          if (res.flag == true) {\n            alert(res.message);\n          } else {\n            alert(res.message);\n          }\n        })\n        .catch((err) => {\n          alert(\"添加失败,请先登录\");\n        });\n    },\n    changeInfo() {\n      this.$store.commit(\"updateChangedOrderId\", this.$store.state.changedOrderId);\n      selectOrderById({\n        order_id: this.$store.state.changedOrderId,\n      })\n        .then((res) => {\n          this.updateGoodInfo = res.data;\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    getSalesInfo(){\n      selectUserByUsername({\n        user_name: this.data.ownName,\n      }).then((res) => {\n        this.updateUserData = res.data;\n      }).catch(err=>{\n        console.log(err);\n      })\n    }\n  },\n  mounted() {\n    this.$store.commit(\"updateActiveIndex\", \"3\");\n    selectOrderById({\n      order_id: this.$route.query.orderId,\n    }).then((res) => {\n      if (res.flag == true) {\n        this.data = res.data;\n\n        this.getSalesInfo()\n      }\n    });\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.details-box {\n  width: 1100px;\n  min-height: 100%;\n  height: auto;\n  margin: 20px auto;\n  padding: 20px;\n  background: #fff;\n  display: flex;\n  flex-direction: column;\n  // align-items: center;\n  img {\n    width: 360px;\n    height: 300px;\n    margin: 50px auto 20px;\n    border-radius: 6px;\n  }\n  .title {\n    font-size: 24px;\n    font-weight: bold;\n    line-height: 35px;\n    max-height: 70px;\n    text-align: center;\n    margin-bottom: 20px;\n  }\n  .time {\n    margin-top: 5px;\n    color: #999;\n    display: flex;\n    justify-content: flex-end;\n  }\n  .info {\n    width: 100%;\n    min-height: 300px;\n    border-radius: 6px;\n    padding: 10px 20px;\n    margin: 0 auto;\n    display: flex;\n    align-content: center;\n    justify-content: center;\n    .content {\n      min-height: 100px;\n      // border: 1px dashed #f2f2f2;\n      line-height: 25px;\n      padding: 5px 10px;\n      /*超出的部分隐藏*/\n      overflow: hidden;\n      /*文字用省略号替代超出的部分*/\n      text-overflow: ellipsis;\n      /*弹性伸缩盒子模型显示*/\n      display: -webkit-box;\n      /*限制在一个块元素显示文本的行数*/\n      -webkit-line-clamp: 4;\n      /*设置或检索伸缩盒对象的子元素排列方式*/\n      -webkit-box-orient: vertical;\n    }\n    .item-style{\n      display: flex;\n      flex-direction: row;\n      justify-content: space-between;\n      margin-top: 5px;\n    }\n  }\n  .item-sales{\n    color: #333 !important;\n    line-height: 30px;\n    max-height: 30px;\n    .sales-text{\n      color: #666;\n    }\n  }\n}\n</style>\n"],"mappings":"AA6BA,SAAAA,cAAA;AACA,SAAAC,eAAA;AACA,OAAAC,aAAA;AACA,SAAAC,oBAAA;AAEA;EACAC,KAAA;IACA;MACAA,IAAA;MACAC,SAAA;MACAC,SAAA;MACAC,cAAA;MACAC,cAAA;IACA;EACA;EACAC,OAAA;IACAC,WAAAC,IAAA;MACA,OAAAA,IAAA,CAAAC,KAAA;IACA;IACAC,WAAA,WAAAA,CAAAC,KAAA;MACA,IAAAC,IAAA,OAAAC,IAAA,CAAAF,KAAA;MACA,IAAAG,CAAA,GAAAF,IAAA,CAAAG,WAAA;MACA,IAAAC,EAAA,GAAAJ,IAAA,CAAAK,QAAA;MACAD,EAAA,GAAAA,EAAA,cAAAA,EAAA,GAAAA,EAAA;MACA,IAAAE,CAAA,GAAAN,IAAA,CAAAO,OAAA;MACAD,CAAA,GAAAA,CAAA,cAAAA,CAAA,GAAAA,CAAA;MACA,IAAAE,CAAA,GAAAR,IAAA,CAAAS,QAAA;MACAD,CAAA,GAAAA,CAAA,cAAAA,CAAA,GAAAA,CAAA;MACA,IAAAE,CAAA,GAAAV,IAAA,CAAAW,UAAA;MACAD,CAAA,GAAAA,CAAA,cAAAA,CAAA,GAAAA,CAAA;MACA,IAAAE,CAAA,GAAAZ,IAAA,CAAAa,UAAA;MACAD,CAAA,GAAAA,CAAA,cAAAA,CAAA,GAAAA,CAAA;MACA,OAAAV,CAAA,SAAAE,EAAA,SAAAE,CAAA;IACA;EACA;EACAQ,UAAA;IAAA3B;EAAA;EACA4B,KAAA;IACAC,KAAA;MACAC,IAAA,EAAAC;IACA;IACAC,SAAA;MACAF,IAAA,EAAAC;IACA;EACA;EACAE,OAAA;IACAC,iBAAA;MACApC,cAAA;QACAqC,QAAA,OAAAjC,IAAA,CAAAkC;MACA,GACAC,IAAA,CAAAC,GAAA;QACAC,OAAA,CAAAC,GAAA,CAAAF,GAAA;QACA,IAAAA,GAAA,CAAAG,IAAA;UACAC,KAAA,CAAAJ,GAAA,CAAAK,OAAA;QACA;UACAD,KAAA,CAAAJ,GAAA,CAAAK,OAAA;QACA;MACA,GACAC,KAAA,CAAAC,GAAA;QACAH,KAAA;MACA;IACA;IACAI,WAAA;MACA,KAAAC,MAAA,CAAAC,MAAA,8BAAAD,MAAA,CAAAE,KAAA,CAAAC,cAAA;MACAnD,eAAA;QACAoC,QAAA,OAAAY,MAAA,CAAAE,KAAA,CAAAC;MACA,GACAb,IAAA,CAAAC,GAAA;QACA,KAAAjC,cAAA,GAAAiC,GAAA,CAAApC,IAAA;MACA,GACA0C,KAAA,CAAAC,GAAA;QACAN,OAAA,CAAAC,GAAA,CAAAK,GAAA;MACA;IACA;IACAM,aAAA;MACAlD,oBAAA;QACAmD,SAAA,OAAAlD,IAAA,CAAAmD;MACA,GAAAhB,IAAA,CAAAC,GAAA;QACA,KAAAhC,cAAA,GAAAgC,GAAA,CAAApC,IAAA;MACA,GAAA0C,KAAA,CAAAC,GAAA;QACAN,OAAA,CAAAC,GAAA,CAAAK,GAAA;MACA;IACA;EACA;EACAS,QAAA;IACA,KAAAP,MAAA,CAAAC,MAAA;IACAjD,eAAA;MACAoC,QAAA,OAAAoB,MAAA,CAAAC,KAAA,CAAApB;IACA,GAAAC,IAAA,CAAAC,GAAA;MACA,IAAAA,GAAA,CAAAG,IAAA;QACA,KAAAvC,IAAA,GAAAoC,GAAA,CAAApC,IAAA;QAEA,KAAAiD,YAAA;MACA;IACA;EACA;AACA","ignoreList":[]}]}