{"remainingRequest":"/Users/panfangziniubi/Desktop/project/sale/node_modules/.store/babel-loader@8.3.0/node_modules/babel-loader/lib/index.js!/Users/panfangziniubi/Desktop/project/sale/node_modules/.store/cache-loader@4.1.0/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/panfangziniubi/Desktop/project/sale/node_modules/.store/vue-loader@15.11.1/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/panfangziniubi/Desktop/project/sale/src/views/HomeCollect.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/panfangziniubi/Desktop/project/sale/src/views/HomeCollect.vue","mtime":1690101942000},{"path":"/Users/panfangziniubi/Desktop/project/sale/babel.config.js","mtime":1628668279000},{"path":"/Users/panfangziniubi/Desktop/project/sale/node_modules/.store/cache-loader@4.1.0/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/panfangziniubi/Desktop/project/sale/node_modules/.store/babel-loader@8.3.0/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/panfangziniubi/Desktop/project/sale/node_modules/.store/cache-loader@4.1.0/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/panfangziniubi/Desktop/project/sale/node_modules/.store/vue-loader@15.11.1/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCB7IHNob3djb2xsZWN0LCBjb2xsZWN0ZGVsZXRlLCBhZGRPcmRlclRvQ2FydCB9IGZyb20gIi4uL2FwaS9jYXJ0IjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkYXRhQXJyYXk6IFtdLAogICAgICBmYXZvcml0ZXNTZWxlY3Rpb246IFtdLAogICAgICBtdWx0aXBsZVNlbGVjdGlvbjogW10sCiAgICAgIHNlbGVjdGVkUm93czogW10gLy8g5L+d5a2Y6YCJ5Lit55qE6KGM5pWw5o2uCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlKHJvd3MpIHsKICAgICAgLy8g5aSE55CG6KGM54K55Ye75LqL5Lu277yM5bCG6YCJ5Lit55qE6KGM5pWw5o2u5L+d5a2Y5YiwIHNlbGVjdGVkUm93cyDmlbDnu4TkuK0KICAgICAgcm93cy5mb3JFYWNoKHJvdyA9PiB7CiAgICAgICAgY29uc3QgaXNTZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWRSb3dzLnNvbWUoaXRlbSA9PiBpdGVtID09PSByb3cpOwogICAgICAgIGlmIChpc1NlbGVjdGVkKSB7CiAgICAgICAgICB0aGlzLnNlbGVjdGVkUm93cyA9IHRoaXMuc2VsZWN0ZWRSb3dzLmZpbHRlcihpdGVtID0+IGl0ZW0gIT09IHJvdyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuc2VsZWN0ZWRSb3dzLnB1c2gocm93KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIHRvZ2dsZVNlbGVjdGlvbihyb3dzKSB7CiAgICAgIGNvbnN0IGZhdm9yaXRlc1RhYmxlID0gdGhpcy4kcmVmcy5mYXZvcml0ZXNUYWJsZTsKICAgICAgaWYgKHJvd3MpIHsKICAgICAgICByb3dzLmZvckVhY2gocm93ID0+IHsKICAgICAgICAgIGZhdm9yaXRlc1RhYmxlLnRvZ2dsZVJvd1NlbGVjdGlvbihyb3cpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIGZhdm9yaXRlc1RhYmxlLmNsZWFyU2VsZWN0aW9uKCk7CiAgICAgIH0KICAgIH0sCiAgICAvLyDliqDlhaXotK3nianovaYKICAgIGFkZFNob3BjYXJ0Q2xpY2soKSB7CiAgICAgIGNvbnN0IHNlbGVjdGVkUm93cyA9IHRoaXMuc2VsZWN0ZWRSb3dzOwogICAgICBpZiAoc2VsZWN0ZWRSb3dzICYmIHNlbGVjdGVkUm93cy5sZW5ndGggPiAwKSB7CiAgICAgICAgc2VsZWN0ZWRSb3dzLmZvckVhY2goc2VsZWN0ZWRQcm9kdWN0ID0+IHsKICAgICAgICAgIGFkZE9yZGVyVG9DYXJ0KHsKICAgICAgICAgICAgb3JkZXJfaWQ6IHNlbGVjdGVkUHJvZHVjdC5vcmRlcklkCiAgICAgICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICAgIGlmIChyZXMuZmxhZyA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgIGFsZXJ0KHJlcy5tZXNzYWdlKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBhbGVydChyZXMubWVzc2FnZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgICAgIGFsZXJ0KCLmt7vliqDlpLHotKXvvIzor7flhYjnmbvlvZUiKTsKICAgICAgICAgIH0pOwogICAgICAgICAgdGhpcy5kZWxldGVDbGljayhzZWxlY3RlZFByb2R1Y3QpOwogICAgICAgIH0pOwogICAgICAgIGNvbnNvbGUubG9nKCLpgInkuK3nmoTllYblk4Hlt7Lmt7vliqDliLDotK3nianovaYiKTsKICAgICAgICB0aGlzLnRvZ2dsZVNlbGVjdGlvbigpOyAvLyDmuIXpmaTpgInkuK3nirbmgIEKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zb2xlLmxvZygi6K+36YCJ5oup5ZWG5ZOBIik7CiAgICAgIH0KICAgIH0sCiAgICAvL+WxleekuuaUtuiXj+WkueS/oeaBrwogICAgZ2V0T3JkZXJMaXN0KCkgewogICAgICBzaG93Y29sbGVjdCh7fSkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuZmxhZyA9PSB0cnVlKSB7CiAgICAgICAgICB0aGlzLmRhdGFBcnJheSA9IHJlcy5kYXRhOwogICAgICAgICAgdGhpcy50b3RhbHByaWNlID0gMDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5oKo5pyq55m75b2V77yM6K+35YWI55m75b2VJyk7CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL2xvZ2luIik7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgIGNvbnNvbGUubG9nKGVycik7CiAgICAgIH0pOwogICAgfSwKICAgIHJvd0NsYXNzTmFtZSh7CiAgICAgIHJvdywKICAgICAgcm93SW5kZXgKICAgIH0pIHsKICAgICAgcm93LmluZGV4ID0gcm93SW5kZXg7CiAgICB9LAogICAgZGVsZXRlQ2xpY2socm93KSB7CiAgICAgIHRoaXMuJGNvbmZpcm0oJ+ehruiupOWIoOmZpOivpeWVhuWTgT8nLCAn5Yig6ZmkJywgewogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKICAgICAgICB0eXBlOiAnd2FybmluZycKICAgICAgfSkudGhlbigoKSA9PiB7CiAgICAgICAgY29sbGVjdGRlbGV0ZSh7CiAgICAgICAgICBvcmRlcl9pZDogcm93LnNob3BwaW5nSWQKICAgICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuWIoOmZpOaIkOWKnyIpOwogICAgICAgICAgdGhpcy5nZXRPcmRlckxpc3QoKTsKICAgICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5Yig6Zmk5aSx6LSlIik7CiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdpbmZvJywKICAgICAgICAgIG1lc3NhZ2U6ICflt7Llj5bmtojliKDpmaQnCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0T3JkZXJMaXN0KCk7CiAgfQp9Ow=="},{"version":3,"names":["showcollect","collectdelete","addOrderToCart","data","dataArray","favoritesSelection","multipleSelection","selectedRows","methods","handleSelectionChange","rows","forEach","row","isSelected","some","item","filter","push","toggleSelection","favoritesTable","$refs","toggleRowSelection","clearSelection","addShopcartClick","length","selectedProduct","order_id","orderId","then","res","console","log","flag","alert","message","catch","err","deleteClick","getOrderList","totalprice","$message","error","$router","rowClassName","rowIndex","index","$confirm","confirmButtonText","cancelButtonText","type","shoppingId","success","created"],"sources":["src/views/HomeCollect.vue"],"sourcesContent":["<template>\n  <div class=\"favorites\">\n\n    <el-table\n      ref=\"favoritesTable\"\n      :data=\"dataArray\"\n      stripe:true\n      tooltip-effect=\"dark\"\n      style=\"width: 100%; margin-top: 20px;\"\n      :row-key=\"(row) => { return row.id }\"\n      :row-class-name=\"rowClassName\"\n      @selection-change=\"handleSelectionChange\">\n      <el-table-column type=\"selection\" :selectable=\"selectable\" width=\"55\"></el-table-column>\n      <el-table-column label=\"商品\">\n        <template slot-scope=\"scope\">\n          <div class=\"goods\">\n            <img :src=\"$store.state.imgShowRoad + '/file/' + scope.row.picture\" alt=\"\"/>\n            <div class=\"info\">\n              <h4 class=\"title\">{{ scope.row.title }}</h4>\n              <p class=\"content\">{{ scope.row.description }}</p>\n            </div>\n          </div>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"单价\" width=\"120\">\n        <template slot-scope=\"scope\">\n          <p class=\"price\">{{ scope.row.price }}</p>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"操作\" show-overflow-tooltip width=\"100\">\n        <template slot-scope=\"scope\">\n          <el-button type=\"info\" class=\"delete-btn\" @click=\"deleteClick(scope.row)\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n    <div style=\"margin-top: 20px\" class=\"cancel\">\n      <el-button @click=\"toggleSelection()\">取消选择</el-button>\n      <el-button @click=\"addShopcartClick\" type=\"danger\"  class=\"place-order\" >加入购物车</el-button>\n    </div>\n    \n    \n  </div>\n</template>\n\n<script>\nimport { showcollect, collectdelete, addOrderToCart } from \"../api/cart\";\n\nexport default {\n  data() {\n    return {\n      dataArray: [],\n      favoritesSelection: [],\n      multipleSelection: [],\n      selectedRows: [] // 保存选中的行数据\n    };\n  },\n\n  \n  methods: {\n    handleSelectionChange(rows) {\n      // 处理行点击事件，将选中的行数据保存到 selectedRows 数组中\n      rows.forEach(row => {\n        const isSelected = this.selectedRows.some(item => item === row);\n        if (isSelected) {\n          this.selectedRows = this.selectedRows.filter(item => item !== row);\n        } else {\n          this.selectedRows.push(row);\n        }\n      });\n    },\n    toggleSelection(rows) {\n      const favoritesTable = this.$refs.favoritesTable;\n      if (rows) {\n        rows.forEach(row => {\n          favoritesTable.toggleRowSelection(row);\n        });\n      } else {\n        favoritesTable.clearSelection();\n      }\n    },\n    // 加入购物车\n    addShopcartClick() {\n      const selectedRows = this.selectedRows;\n\n      if (selectedRows && selectedRows.length > 0) {\n        selectedRows.forEach(selectedProduct => {\n          addOrderToCart({\n            order_id: selectedProduct.orderId\n          })\n            .then(res => {\n              console.log(res);\n              if (res.flag === true) {\n                alert(res.message);\n              } else {\n                alert(res.message);\n              }\n            })\n            .catch(err => {\n              alert(\"添加失败，请先登录\");\n            });\n            this.deleteClick(selectedProduct);\n        });\n\n        console.log(\"选中的商品已添加到购物车\");\n        this.toggleSelection(); // 清除选中状态\n      } \n      else {\n        console.log(\"请选择商品\");\n      }\n    },\n\n\n\n    //展示收藏夹信息\n    getOrderList(){\n      showcollect({}).then((res) => {\n        if (res.flag == true) {\n          this.dataArray = res.data;\n          this.totalprice = 0;\n        } else {\n          this.$message.error('您未登录，请先登录')\n          this.$router.push(\"/login\")\n        }\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n    },\n\n    rowClassName({ row, rowIndex }) {\n      row.index = rowIndex;\n    },\n   \n    deleteClick(row) {\n      this.$confirm('确认删除该商品?', '删除', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n\n          collectdelete({\n            order_id: row.shoppingId,\n          }).then((res) => {\n            this.$message.success(\"删除成功\");\n            this.getOrderList()\n          }).catch((err) => {\n            this.$message.error(\"删除失败\");\n          });\n\n        }).catch(() => {\n          this.$message({\n            type: 'info',\n            message: '已取消删除'\n          });          \n        });\n    },\n    \n  },\n  created() {\n    this.getOrderList()\n  }\n};\n</script>\n  \n  <style lang=\"less\" scoped>\n\n\n  .place-order{\n    float: right;\n\n  }\n\n\n\n  .favorites {\n    width: 1100px;\n    margin: 10px auto;\n    background: #fff;\n    padding: 10px 20px;\n    .goods {\n      width: 500px;\n      img {\n        float: left;\n        width: 150px;\n        height: 100px;\n        margin-right: 10px;\n        border-radius: 6px;\n      }\n      .info {\n        // float: left;\n        display: flex;\n        flex-direction: column;\n        justify-content: flex-start;\n        align-items: flex-start;\n        .title {\n          margin: 0;\n        }\n        .content {\n          height: 65px;\n          // width: 200px;\n          /*超出的部分隐藏*/\n          overflow: hidden;\n          /*文字用省略号替代超出的部分*/\n          text-overflow: ellipsis;\n          /*弹性伸缩盒子模型显示*/\n          display: -webkit-box;\n          /*限制在一个块元素显示文本的行数*/\n          -webkit-line-clamp: 3;\n          /*设置或检索伸缩盒对象的子元素排列方式*/\n          -webkit-box-orient: vertical;\n        }\n      }\n    }\n    \n  }\n  </style>"],"mappings":";AA6CA,SAAAA,WAAA,EAAAC,aAAA,EAAAC,cAAA;AAEA;EACAC,KAAA;IACA;MACAC,SAAA;MACAC,kBAAA;MACAC,iBAAA;MACAC,YAAA;IACA;EACA;EAGAC,OAAA;IACAC,sBAAAC,IAAA;MACA;MACAA,IAAA,CAAAC,OAAA,CAAAC,GAAA;QACA,MAAAC,UAAA,QAAAN,YAAA,CAAAO,IAAA,CAAAC,IAAA,IAAAA,IAAA,KAAAH,GAAA;QACA,IAAAC,UAAA;UACA,KAAAN,YAAA,QAAAA,YAAA,CAAAS,MAAA,CAAAD,IAAA,IAAAA,IAAA,KAAAH,GAAA;QACA;UACA,KAAAL,YAAA,CAAAU,IAAA,CAAAL,GAAA;QACA;MACA;IACA;IACAM,gBAAAR,IAAA;MACA,MAAAS,cAAA,QAAAC,KAAA,CAAAD,cAAA;MACA,IAAAT,IAAA;QACAA,IAAA,CAAAC,OAAA,CAAAC,GAAA;UACAO,cAAA,CAAAE,kBAAA,CAAAT,GAAA;QACA;MACA;QACAO,cAAA,CAAAG,cAAA;MACA;IACA;IACA;IACAC,iBAAA;MACA,MAAAhB,YAAA,QAAAA,YAAA;MAEA,IAAAA,YAAA,IAAAA,YAAA,CAAAiB,MAAA;QACAjB,YAAA,CAAAI,OAAA,CAAAc,eAAA;UACAvB,cAAA;YACAwB,QAAA,EAAAD,eAAA,CAAAE;UACA,GACAC,IAAA,CAAAC,GAAA;YACAC,OAAA,CAAAC,GAAA,CAAAF,GAAA;YACA,IAAAA,GAAA,CAAAG,IAAA;cACAC,KAAA,CAAAJ,GAAA,CAAAK,OAAA;YACA;cACAD,KAAA,CAAAJ,GAAA,CAAAK,OAAA;YACA;UACA,GACAC,KAAA,CAAAC,GAAA;YACAH,KAAA;UACA;UACA,KAAAI,WAAA,CAAAZ,eAAA;QACA;QAEAK,OAAA,CAAAC,GAAA;QACA,KAAAb,eAAA;MACA,OACA;QACAY,OAAA,CAAAC,GAAA;MACA;IACA;IAIA;IACAO,aAAA;MACAtC,WAAA,KAAA4B,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAG,IAAA;UACA,KAAA5B,SAAA,GAAAyB,GAAA,CAAA1B,IAAA;UACA,KAAAoC,UAAA;QACA;UACA,KAAAC,QAAA,CAAAC,KAAA;UACA,KAAAC,OAAA,CAAAzB,IAAA;QACA;MACA,GACAkB,KAAA,CAAAC,GAAA;QACAN,OAAA,CAAAC,GAAA,CAAAK,GAAA;MACA;IACA;IAEAO,aAAA;MAAA/B,GAAA;MAAAgC;IAAA;MACAhC,GAAA,CAAAiC,KAAA,GAAAD,QAAA;IACA;IAEAP,YAAAzB,GAAA;MACA,KAAAkC,QAAA;QACAC,iBAAA;QACAC,gBAAA;QACAC,IAAA;MACA,GAAArB,IAAA;QAEA3B,aAAA;UACAyB,QAAA,EAAAd,GAAA,CAAAsC;QACA,GAAAtB,IAAA,CAAAC,GAAA;UACA,KAAAW,QAAA,CAAAW,OAAA;UACA,KAAAb,YAAA;QACA,GAAAH,KAAA,CAAAC,GAAA;UACA,KAAAI,QAAA,CAAAC,KAAA;QACA;MAEA,GAAAN,KAAA;QACA,KAAAK,QAAA;UACAS,IAAA;UACAf,OAAA;QACA;MACA;IACA;EAEA;EACAkB,QAAA;IACA,KAAAd,YAAA;EACA;AACA","ignoreList":[]}]}